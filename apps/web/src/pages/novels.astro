---
import Filter from "@/components/search/Filter.astro";
import Pagination from "@/components/search/SearchPagination.astro";
import { Button } from "@/components/starwind/button";
import { Input } from "@/components/starwind/input";
import BaseLayout from "@/layouts/BaseLayout.astro";
import Copy from "@tabler/icons/outline/copy.svg";
---

<BaseLayout>
  <div>
    <div class="flex items-center gap-2 mb-4">
      <!-- TODO: icon -->
      <Copy /><h1 class="text-4xl font-semibold">Search Novels</h1>
    </div>
    <div class="relative">
      <Copy
        class="absolute left-1 top-6 -translate-y-1/2 text-gray-500 w-10 pointer-events-none"
      />
    </div>
    <div class="flex gap-2">
      <Input size="lg" placeholder="Search" class="pl-11 bg-accent" />
      <Button>Search</Button>
      <!-- TODO: icon -->
      <Button id="filter-toggle" class="flex">
        <span id="filter-toggle-text"> Show Filters </span>
        <Copy
          id="filter-toggle-icon"
          class="transition-transform duration-150"
        />
      </Button>
    </div>
    <Filter />
    <!-- TODO: results -->
    <Pagination />
  </div>
</BaseLayout>

<script>
  document.addEventListener("astro:page-load", () => {
    const filterToggle = document.getElementById("filter-toggle");
    const filterToggleText = document.getElementById("filter-toggle-text");
    const filterToggleIcon = document.getElementById("filter-toggle-icon");
    const filter = document.getElementById("filter");

    filterToggle!.addEventListener("click", () => {
      filter!.classList.toggle("h-0");
      filter!.classList.toggle("h-96");
      filterToggleIcon?.classList.toggle("rotate-180");
      filterToggleText!.textContent = filter!.classList.contains("h-96")
        ? "Hide Filters"
        : "Show Filters";
    });
  });
</script>
